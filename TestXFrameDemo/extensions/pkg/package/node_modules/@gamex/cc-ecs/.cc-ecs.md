# ecs模块

## 前置条件
无

## 使用案例
```TS
import {ecs, ecsclass, filter, EcsComponent, EcsSingleton, EcsEntity, EcsSystem} from 'db://pkg/@gamex/cc-ecs';

class MyEntity extends EcsEntity {
    // 允许回收
    static allowRecycling = true;
}

@ecsclass('MyComponent')
class MyComponent extends EcsComponent<MyEntity> {
    // 允许回收
    static allowRecycling = true;
    public name = '';

    // 因为开启回收，触发onDisable后重制数据
    protected onDisable(){
        this.name = '';
    }
}
@ecsclass('MySingleton')
class MySingleton extends EcsSingleton{
    
}

class MySystem extends EcsSystem {
    private filter = filter.all(MyComponent);
    execute() {
        this.query(this.filter).forEach(entity => {
            console.log(entity.getComponent(MyComponent).name);
            entity.removeComponent(MyComponent);
            entity.destroy();
        })
        this.find(this.filter);
        this.exist(this.filter);
    }
}
// 创建实体并添加组件
const entity = ecs.createEntity(MyEntity, {node});
entity.addComponent(MyComponent);

// 单例组件，不依附于实体而存在，一般用于存储全局数据
ecs.getSingleton(MySingleton);

// 驱动系统运行
ecs.execute();
```
